<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      function Person(age) {
        this.name = "111";
        this.age = age;

        // return {
        //   name: '333'
        // }
      }

      Person.prototype.sayHello = function () {
        console.log("ðŸš€ ~ sayHello:", this.name, this.age);
      };

      // const person = new Person(20);
      // console.log("ðŸš€ ~ person:", person);
      // person.sayHello();

      const customNew = (Fn, ...args) => {
        let obj = {};
        obj.__proto__ = Fn.prototype;

        // å¦‚æžœæž„é€ å‡½æ•°è¿”å›žäº†ä¸ªå¯¹è±¡ï¼Œè¿™é‡Œä¹Ÿè¿”å›žå¯¹è±¡
        let res = Fn.apply(obj, args);
        return typeof res === "object" ? res : obj;
      };

      const customPerson = customNew(Person, 18);
      customPerson.sayHello();
    </script>
  </body>
</html>
